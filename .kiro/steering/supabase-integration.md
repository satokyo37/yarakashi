---
inclusion: manual
---

# Supabase統合ガイドライン

このルールは`#supabase-integration`として手動で呼び出す時に適用されます。

## データベース操作
- 全てのクエリでエラーハンドリングを実装する
- RLS（Row Level Security）ポリシーを必ず設定する
- 型安全なクエリを記述する
- バッチ操作を活用してパフォーマンスを向上させる

## 認証
- 匿名認証を基本とする
- セッション管理を適切に行う
- 認証状態の変更を監視する
- ログアウト機能を提供する

## リアルタイム機能
- 必要な場合のみリアルタイム購読を使用
- 購読の解除を忘れずに行う
- エラー時の再接続ロジックを実装

## ファイルストレージ
- 適切なバケットポリシーを設定
- ファイルサイズ制限を実装
- 画像の最適化を行う
- 不要なファイルの削除機能を実装

## 参考資料
- 設計書: #[[file:.kiro/specs/mishap-sharing-board/design.md]]
- 要件定義: #[[file:.kiro/specs/mishap-sharing-board/requirements.md]]